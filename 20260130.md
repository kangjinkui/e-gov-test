# 2026-01-30 작업 내역

## 개요
eGovFrame 프로젝트의 Maven 빌드 오류를 해결하고 프로젝트 환경을 구성함

## 해결한 문제들

### 1. Java 버전 호환성 문제

**문제:**
- Maven 컴파일러가 Java 17을 요구하는데 시스템에 두 가지 Java 버전이 설치됨
  - `javac`: 17.0.17 (컴파일러)
  - `java`: 21.0.9 (런타임)
- 초기 설정이 Java 21로 되어 있어 빌드 실패

**해결:**
- `pom.xml`의 Java 버전을 17로 변경
- Maven 컴파일러 플러그인 설정 변경: `release` → `source`/`target`

```xml
<properties>
    <java.version>17</java.version>
</properties>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.14.0</version>
    <configuration>
        <source>${java.version}</source>
        <target>${java.version}</target>
    </configuration>
</plugin>
```

### 2. Jakarta Annotations API 누락

**문제:**
- Java 9+에서 `javax.annotation` 패키지가 JDK에서 제거됨
- 19개 Java 파일에서 `javax.annotation.Resource` import 오류 (38개 컴파일 에러)

**해결:**
1. Jakarta Annotations API 의존성 추가
```xml
<dependency>
    <groupId>jakarta.annotation</groupId>
    <artifactId>jakarta.annotation-api</artifactId>
    <version>2.1.1</version>
</dependency>
```

2. 모든 Java 파일의 import 문 변경 (19개 파일)
```bash
# 일괄 변경 명령어
find src/main/java -name "*.java" -type f -exec sed -i 's/import javax\.annotation\.Resource;/import jakarta.annotation.Resource;/g' {} \;
```

**영향받은 파일:**
- `egovframework/lawmatcher/auth/service/CustomUserDetailsService.java`
- `egovframework/lawmatcher/department/**/*.java` (2개)
- `egovframework/lawmatcher/law/**/*.java` (8개)
- `egovframework/lawmatcher/ordinance/**/*.java` (6개)
- `egovframework/lawmatcher/review/**/*.java` (2개)

### 3. JAVA_HOME 환경 변수 미설정

**문제:**
- Javadoc 생성 중 `JAVA_HOME` 환경 변수가 설정되지 않아 빌드 실패

**해결:**
1. `~/.bashrc`에 JAVA_HOME 추가
```bash
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
export PATH=$JAVA_HOME/bin:$PATH
```

2. 임시 빌드 명령어 (현재 세션)
```bash
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64 mvn clean package
```

### 4. Git 저장소 관리 문제

**문제:**
- `.gitignore` 파일 부재로 빌드 산출물이 Git에 추적됨
- `target/` 디렉토리에 569개 파일 (104MB)
- 커밋할 파일 수가 50 → 360 → 590개로 계속 변경

**해결:**
- `.gitignore` 파일 생성하여 다음 항목 제외:
  - Maven 빌드 산출물 (`target/`, `*.jar`, `*.war`)
  - IDE 설정 파일 (`.idea/`, `.vscode/`, `.settings/`)
  - OS 파일 (`.DS_Store`, `Thumbs.db`)
  - 로그 및 임시 파일

**결과:**
- Git 추적 파일: 590개 → 23개로 축소

## 최종 빌드 결과

### 성공한 빌드
```
[INFO] BUILD SUCCESS
[INFO] Total time: 14.195 s
```

### 생성된 산출물
- WAR 파일: `egov-test/target/egov-test-1.0.0.war`
- Javadoc JAR: `egov-test/target/egov-test-1.0.0-javadoc.jar`
- 컴파일된 클래스: 72개 Java 소스 파일

### 경고 사항
- Javadoc 경고 26개 (문서화 주석 관련, 빌드에 무영향)

## 수정된 주요 파일

### 설정 파일
- `egov-test/pom.xml`: Java 버전 및 의존성 설정
- `.gitignore`: Git 제외 목록 추가
- `~/.bashrc`: JAVA_HOME 환경 변수 추가

### 소스 코드
- 19개 Java 파일: `javax.annotation` → `jakarta.annotation` 변경

## 향후 작업 시 참고사항

### Maven 빌드 명령어
```bash
# egov-test 디렉토리로 이동
cd /home/user/dev/e-gov-test/egov-test

# 빌드 실행
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64 mvn clean package

# 또는 새 터미널에서 (.bashrc 적용 후)
mvn clean package
```

### 환경 정보
- OS: Linux (WSL2) 6.6.87.2-microsoft-standard-WSL2
- Java 컴파일러: OpenJDK 17.0.17
- Java 런타임: OpenJDK 21.0.9
- Maven: 3.8.7
- eGovFrame RTE: 5.0.0
- Spring Framework: 6.2.11

## 문제 해결 요약

| 문제 | 원인 | 해결책 |
|------|------|--------|
| `release version 17 not supported` | javac 버전 불일치 | Java 버전을 17로 변경, source/target 사용 |
| `package javax.annotation does not exist` | Java 9+ API 변경 | Jakarta Annotations API 추가 |
| `cannot find symbol: class Resource` | import 문 오류 | javax → jakarta로 일괄 변경 |
| `JAVA_HOME is not correctly set` | 환경 변수 미설정 | .bashrc에 JAVA_HOME 추가 |
| Git 파일 수 급증 | target 디렉토리 추적 | .gitignore 생성 |

## 참고 자료
- eGovFrame 표준프레임워크: https://www.egovframe.go.kr
- Jakarta EE Annotations: https://jakarta.ee/specifications/annotations/
- Maven 컴파일러 플러그인: https://maven.apache.org/plugins/maven-compiler-plugin/
